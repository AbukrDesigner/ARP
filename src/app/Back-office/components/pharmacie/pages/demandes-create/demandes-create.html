<div class="demandes-create-container">
  <p-steps [model]="items" [activeIndex]="activeIndex" class="mb-4"></p-steps>

  <ng-container [ngSwitch]="activeIndex">
    <!-- Étape 1 -->
    <ng-container *ngSwitchCase="0">
      <div class="step-header">
        <div class="step-subtitle">Étape 1/3</div>
        <h2 class="step-title">Identification de l&apos;officine actuelle</h2>
        <div class="step-progress">
          <div class="step-progress-bar"></div>
        </div>
      </div>

      <form [formGroup]="identificationForm" class="step-form">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Numéro d&apos;inscription à l&apos;Ordre</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="numeroOrdre"
              placeholder="Numéro d'inscription à l'Ordre"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Raison sociale</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="raisonSociale"
              placeholder="Raison sociale"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Adresse complète actuelle</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="adresseCompleteActuelle"
              placeholder="Adresse complète actuelle"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Nom du titulaire actuel</label>
            <p-select
              [options]="titulaireOptions"
              formControlName="titulaireActuel"
              optionLabel="label"
              optionValue="value"
              styleClass="w-100"
              placeholder="Nom du titulaire actuel"
            ></p-select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Téléphone de l&apos;officine</label>
            <input
              pInputText
              type="tel"
              class="form-control"
              formControlName="telephoneOfficine"
              placeholder="Téléphone de l'officine"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Email</label>
            <input
              pInputText
              type="email"
              class="form-control"
              formControlName="email"
              placeholder="Email"
            />
          </div>
        </div>

        <div class="step-actions">
          <button
            type="button"
            pButton
            class="p-button-text"
            label="Annuler"
            (click)="onCancel()"
          ></button>

          <button
            type="button"
            pButton
            label="Suivant"
            (click)="onNext()"
            [disabled]="identificationForm.invalid"
          ></button>
        </div>
      </form>
    </ng-container>

    <!-- Étape 2 -->
    <ng-container *ngSwitchCase="1">
      <div class="step-header">
        <div class="step-subtitle">Étape 2/3</div>
        <h2 class="step-title">Informations du titulaire</h2>
        <div class="step-progress">
          <div class="step-progress-bar step-progress-bar-2"></div>
        </div>
      </div>

      <form [formGroup]="titulaireForm" class="step-form">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nom complet</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="nomComplet"
              placeholder="Nom complet"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Date de naissance</label>
            <input
              pInputText
              type="date"
              class="form-control"
              formControlName="dateNaissance"
              id="dateNaissance"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Numéro d&apos;inscription à l&apos;Ordre (pharmacien)</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="numeroOrdrePharmacien"
              placeholder="Numéro d'inscription à l'Ordre (pharmacien)"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Date d&apos;inscription</label>
            <input
              pInputText
              type="date"
              class="form-control"
              formControlName="dateInscription"
              id="dateInscription"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Diplôme obtenu</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="diplomeObtenu"
              placeholder="Diplôme obtenu"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Année d&apos;obtention</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="anneeObtention"
              placeholder="Année d'obtention"
            />
          </div>

          <div class="col-12">
            <label class="form-label">Qualité</label>
            <p-select
              formControlName="qualite"
              [options]="[
                { label: 'Propriétaire', value: 'proprietaire' },
                { label: 'Gérant', value: 'gerant' },
                { label: 'Associé', value: 'associe' },
                { label: 'Autre', value: 'autre' }
              ]"
              optionLabel="label"
              optionValue="value"
              styleClass="w-100"
              placeholder="Sélectionnez une qualité"
            ></p-select>
          </div>
        </div>

        <div class="step-actions">
          <button
            type="button"
            pButton
            class="p-button-text"
            label="Annuler"
            (click)="onCancel()"
          ></button>

          <button
            type="button"
            pButton
            class="p-button-outlined"
            label="Précédent"
            (click)="onPrevious()"
          ></button>

          <button
            type="button"
            pButton
            label="Suivant"
            (click)="onNext()"
            [disabled]="titulaireForm.invalid"
          ></button>
        </div>
      </form>
    </ng-container>

    <!-- Étape 3 -->
    <ng-container *ngSwitchCase="2">
      <div class="step-header">
        <div class="step-subtitle">Étape 3/3</div>
        <h2 class="step-title">Nouvelle localisation</h2>
        <div class="step-progress">
          <div class="step-progress-bar step-progress-bar-3"></div>
        </div>
      </div>

      <form [formGroup]="localisationForm" class="step-form">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Adresse du nouveau local</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="adresseNouveauLocal"
              placeholder="Adresse du nouveau local"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Surface totale (m²)</label>
            <input
              pInputText
              type="number"
              class="form-control"
              formControlName="surfaceTotale"
              placeholder="Surface totale (m²)"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Type de zone</label>
            <p-select
              formControlName="typeZone"
              [options]="[
                { label: 'Urbaine', value: 'urbaine' },
                { label: 'Semi-urbaine', value: 'semi_urbaine' },
                { label: 'Rurale', value: 'rurale' }
              ]"
              optionLabel="label"
              optionValue="value"
              styleClass="w-100"
              placeholder="Sélectionnez un type de zone"
            ></p-select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Statut</label>
            <p-select
              formControlName="statutProprietaire"
              [options]="[
                { label: 'Propriétaire', value: 'proprietaire' },
                { label: 'Locataire', value: 'locataire' }
              ]"
              optionLabel="label"
              optionValue="value"
              styleClass="w-100"
              placeholder="Sélectionnez un statut"
            ></p-select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Diplôme obtenu</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="diplomeObtenu"
              placeholder="Diplôme obtenu"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Année d&apos;obtention</label>
            <input
              pInputText
              type="text"
              class="form-control"
              formControlName="anneeObtention"
              placeholder="Année d'obtention"
            />
          </div>

          <div class="col-12">
            <label class="form-label">Qualité</label>
            <p-select
              formControlName="qualite"
              [options]="[
                { label: 'Propriétaire', value: 'proprietaire' },
                { label: 'Gérant', value: 'gerant' },
                { label: 'Associé', value: 'associe' },
                { label: 'Autre', value: 'autre' }
              ]"
              optionLabel="label"
              optionValue="value"
              styleClass="w-100"
              placeholder="Sélectionnez une qualité"
            ></p-select>
          </div>
        </div>

        <div class="step-actions">
          <button
            type="button"
            pButton
            class="p-button-text"
            label="Annuler"
            (click)="onCancel()
          "></button>

          <button
            type="button"
            pButton
            class="p-button-outlined"
            label="Précédent"
            (click)="onPrevious()"
          ></button>

          <button
            type="button"
            pButton
            label="Soumettre ma demande"
            (click)="openDialog()"
            [disabled]="localisationForm.invalid"
          ></button>
        </div>
      </form>
    </ng-container>
  </ng-container>
</div>

<!-- MODAL DE CONFIRMATION -->
<p-dialog [showHeader]="false" [modal]="true" [(visible)]="visible" [style]="{ width: '35%' }">
  <i class="bi bi-check-circle icon checked mx-auto mb-2 pt-3"></i>
  <div class="flex flex-column gap-2 text-center">
    <h5>Demande de transfert soumise avec succès  </h5>
    <p>Votre demande de transfert d'officine a bien été enregistrée et sera traitée dans les meilleurs délais.</p>
  </div>
  <div class="my-2 text-center">
    <h5 class="text-uppercase mb-3">information de transfert</h5>
    <div class="row g-2">
      <div class="col-12 col-md-6">
        <div class="text-muted">Numero de dossier : <span>TR2026-00001</span></div>
      </div>
      <div class="col-12 col-md-6">
        <div class="text-muted">Adresse actuelle: <span>Dakar, Plateau</span></div>
      </div>
      <div class="col-12 col-md-6">
        <div class="text-muted">Office: <span>Pharmacie de Plateau</span></div>
      </div>
      <div class="col-12 col-md-6">
        <div class="text-muted">Nouvelle adresse: <span>Dakar, Ouakam</span></div>
      </div>
      <div class="col-12 col-md-6">
        <div class="text-muted">Pharmacien titulaire: <span>Dr. Balde</span></div>
      </div>
      <div class="col-12 col-md-6">
        <div class="text-muted">Date de soumission: <span>09/02/2026</span></div>
      </div>
    </div>
  </div>
  <div class="d-flex justify-content-between gap-2">
      <p-button label="Suivre ma demande" severity="secondary" (click)="visible = false" />
      <p-button label="Retourner au tableau de bord" (click)="visible = false" routerLink="/backoffice/pharmacie" />
  </div>
</p-dialog>